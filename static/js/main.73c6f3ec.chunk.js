(this["webpackJsonptravis-to-github-actions"]=this["webpackJsonptravis-to-github-actions"]||[]).push([[0],{101:function(e,n,t){"use strict";t.r(n);var s=t(2),r=t(0),a=t.n(r),i=t(60),c=t.n(i),o=t(5),u=t(112),l=t(113),h=t(117),p=(t(72),t(38));var d=t(21),b=t(14);function j(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return void 0===e?Object(b.a)(n):Array.isArray(e)?e:[e]}function v(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.length)return n(t);for(var s=0;s<e[0].length;s++)v(e.slice(1),n,(t||[]).concat(e[0][s]))}function f(e){!function(e){var n=e.travis,t=e.matrixAspects,s=e.steps;("python"===n.language||n.python)&&(t["python-version"]=j(n.python,["3.8"]),s.push({name:"Set up Python ${{ matrix.python-version }}",uses:"actions/setup-python@v2",with:{"python-version":"${{ matrix.python-version }}"}}),delete n.python,delete n.language)}(e),function(e){var n=e.travis,t=e.messages,s=e.steps,r=e.matrixAspects;("node_js"===n.language||n.node_js)&&(t.push({type:"info",text:"Node.js versions are not yet parsed from the Travis configuration."}),r["node-version"]=["14.x"],s.push({name:"Set up Node.js ${{ matrix.node-version }}",uses:"actions/setup-node@v1",with:{"node-version":"${{ matrix.node-version }}"}}),delete n.node_js,delete n.language)}(e)}function m(e){var n=e.travis,t=e.messages,s=e.steps,r=function(e){if(Object.keys(e.environmentVariables).length)return Object.fromEntries(Object.keys(e.environmentVariables).map((function(e){return[e,"${{ matrix.".concat(e," }}")]})))}(e);function a(e){return r&&e.run&&e.run.includes("$")&&(e.env=r),e}j(n.install).forEach((function(e){s.push(a({run:e}))})),delete n.install,j(n.script).forEach((function(e){s.push(a({run:e}))})),delete n.script,n.after_success&&(j(n.after_success).forEach((function(e){s.push(a({run:e}))})),t.push({type:"warning",text:"After-success are concatenated onto regular steps"}),delete n.after_success)}function x(e){var n=Object(d.a)(Object(d.a)({},e.matrixAspects),{},{$env$:e.environmentVariableCombinations}),t=Object.keys(n),s=Object.values(n),r=[];return v(s,(function(e){var n={};t.forEach((function(t,s){var r=e[s];"$env$"===t&&"object"===typeof r?Object.assign(n,r):n[t]=r})),r.push(n)})),r}function g(e){return e.environmentVariableCombinations.length?{matrix:{include:x(e)}}:{matrix:Object(d.a)({},e.matrixAspects)}}function O(e){var n=Object(d.a)(Object(d.a)({},e),{},{steps:[],environmentVariableCombinations:[],environmentVariables:{},matrixAspects:{os:["ubuntu-18.04"]}});return function(e){Array.isArray(e.travis.env)&&e.travis.env.every((function(e){return"string"===typeof e}))&&(e.travis.env.forEach((function(n){if("string"===typeof n){var t=Object.fromEntries(n.split(/\s+/).map((function(e){var n=/^(.+?)=(.+)$/.exec(e);return n?[n[1],n[2]]:[e,"1"]})));e.environmentVariableCombinations.push(t),Object.keys(t).forEach((function(n){e.environmentVariables[n]=!0}))}})),delete e.travis.env)}(n),f(n),function(e){var n=e.travis,t=e.steps,s=e.messages;n.cache&&!0!==n.cache&&n.cache.directories&&(t.push({name:"Cache multiple paths",uses:"actions/cache@v2",with:{path:j(n.cache.directories).join("\n"),key:"${{ runner.os }}-${{ hashFiles('TODO') }}"}}),s.push({type:"info",text:"Please revise the cache key for `actions/cache`."}),delete n.cache)}(n),m(n),{"runs-on":"${{ matrix.os }}",strategy:g(n),steps:n.steps}}function y(e){if(!(e=e.trim()).length)return{yaml:"",messages:[]};var n=function(e){return{travis:Object(p.safeLoad)(e),messages:[],github:{name:"Converted Workflow",on:{push:{branches:["master"]},pull_request:{branches:["master"]}},jobs:{}}}}(e),t=n.travis,s=n.messages,r=n.github;return function(e){var n=e.travis,t=e.messages;n.sudo&&t.push({type:"info",text:"Ignoring `sudo`"}),delete n.sudo,n.dist&&t.push({type:"info",text:"Ignoring `dist`"}),delete n.dist}(n),r.jobs.Build=O(n),{yaml:Object(p.safeDump)(r),messages:s,remainingTravis:t&&Object.keys(t).length?Object(p.safeDump)(t):void 0}}var E=t(119);function T(e){var n=e.messages;return n.length?Object(s.jsx)("div",{children:n.map((function(e,n){var t=e.type,r=e.text;return Object(s.jsxs)(E.a,{status:t,children:[Object(s.jsx)(E.c,{}),Object(s.jsx)(E.b,{children:r})]},"".concat(r," ").concat(n))}))}):null}function S(e){var n=e.result;return n&&n.error?Object(s.jsx)("div",{children:Object(s.jsxs)(E.a,{status:"error",children:[Object(s.jsx)(E.c,{}),Object(s.jsxs)(E.b,{children:["Conversion failed: $",n.error]})]})}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(u.a,{direction:"column",flex:1,margin:2,children:[Object(s.jsx)(l.a,{as:"h4",size:"md",children:"GitHub Actions YAML"}),Object(s.jsx)(h.a,{placeholder:"GitHub Actions YAML will appear here",readOnly:!0,value:n.yaml,style:{height:"auto"},flex:1}),Object(s.jsx)(T,{messages:n.messages})]}),n.remainingTravis?Object(s.jsxs)(u.a,{direction:"column",flex:1,margin:2,children:[Object(s.jsx)(l.a,{as:"h4",size:"md",children:"Unconverted Travis configuration"}),Object(s.jsxs)(E.a,{status:"info",children:[Object(s.jsx)(E.c,{}),Object(s.jsxs)(E.b,{children:["The app doesn't yet know how to handle whatever remains in this box.",Object(s.jsx)("br",{}),"If you can help, please open a PR on GitHub \u261d\ufe0f"]})]}),Object(s.jsx)(h.a,{placeholder:"GitHub Actions YAML will appear here",readOnly:!0,value:n.remainingTravis,style:{height:"auto"},flex:1})]}):null]})}var _=t(115),A=t(118),$=function(){return Object(s.jsxs)(u.a,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:"1.5rem",bg:"blue.500",color:"white",children:[" ",Object(s.jsx)(u.a,{align:"center",mr:5,children:Object(s.jsx)(l.a,{as:"h1",size:"lg",children:"Travis to GitHub Actions converter"})}),Object(s.jsx)(_.a,{mt:{base:4,md:0},children:Object(s.jsx)(A.a,{bg:"transparent",border:"1px",as:"a",target:"_blank",href:"https://github.com/akx/travis-to-github-actions",children:"Contribute on GitHub"})})]})};var V=function(){var e,n=a.a.useState(""),t=Object(o.a)(n,2),r=t[0],i=t[1],c=(e=r,a.a.useMemo((function(){try{return y(e)}catch(n){return{yaml:"",messages:[],error:n.toString(),errorDetail:n}}}),[e]));return Object(s.jsxs)(u.a,{direction:"column",flex:1,children:[Object(s.jsx)($,{}),Object(s.jsxs)(u.a,{padding:5,flex:1,children:[Object(s.jsxs)(u.a,{flex:2,direction:"column",margin:2,children:[Object(s.jsxs)(u.a,{justify:"space-between",children:[Object(s.jsx)(l.a,{as:"h4",size:"md",children:"Input Travis.yml"}),Object(s.jsx)("a",{href:"#",onClick:function(){return i('dist: xenial\nlanguage: python\n\n# Use travis docker infrastructure for greater speed\nsudo: false\n\ncache:\n  directories:\n  - cldr\n  - "$HOME/.cache/pip"\n  - "$HOME/.pyenv"\n\nmatrix:\n  include:\n    - os: linux\n      python: 2.7\n      env:\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      python: 2.7\n      env:\n      - CDECIMAL=m3-cdecimal\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      dist: trusty\n      python: pypy\n      env:\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      dist: trusty\n      python: pypy3\n      env:\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.4\n      env:\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      python: 3.5\n      env:\n      - PYTHON_TEST_FLAGS=-bb\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.6\n      env:\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.7\n      env:\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.8\n      env:\n      - PYTEST_VERSION=6.1.2\n\ninstall:\n  - bash .ci/deps.${TRAVIS_OS_NAME}.sh\n  - pip install --upgrade pip\n  - pip install --upgrade $CDECIMAL pytest==$PYTEST_VERSION pytest-cov freezegun==0.3.12\n  - pip install --editable .\n\nscript:\n  - make test-cov\n  - bash .ci/deploy.${TRAVIS_OS_NAME}.sh\n\nnotifications:\n  email: false\n  irc:\n    channels:\n      - "chat.freenode.net#pocoo"\n    on_success: change\n    on_failure: always\n    use_notice: true\n    skip_join: true')},children:"Load example"})]}),Object(s.jsx)(h.a,{placeholder:"Paste a travis.yml here",value:r,onChange:function(e){return i(e.target.value)},style:{height:"auto"},flex:1})]}),Object(s.jsx)(u.a,{flex:3,direction:"row",children:Object(s.jsx)(S,{result:c})})]})]})},w=t(116);c.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(w.a,{children:Object(s.jsx)(V,{})})}),document.getElementById("root"))},72:function(e,n,t){}},[[101,1,2]]]);
//# sourceMappingURL=main.73c6f3ec.chunk.js.map