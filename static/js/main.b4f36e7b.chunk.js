(this["webpackJsonptravis-to-github-actions"]=this["webpackJsonptravis-to-github-actions"]||[]).push([[0],{101:function(e,n,t){"use strict";t.r(n);var s=t(2),r=t(0),a=t.n(r),i=t(61),o=t.n(i),c=t(5),u=t(112),l=t(113),p=t(117),h=(t(72),t(39));var d=t(21),b=t(14);function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return void 0===e?Object(b.a)(n):Array.isArray(e)?e:[e]}function f(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.length)return n(t);for(var s=0;s<e[0].length;s++)f(e.slice(1),n,(t||[]).concat(e[0][s]))}function j(e){return"object"===typeof e&&0===Object.keys(e).length||Array.isArray(e)&&0===e.length}function m(e){if(Array.isArray(e))return e.map(m);if("object"===typeof e){var n={};return Object.keys(e).forEach((function(t){var s=m(e[t]);j(s)||(n[t]=s)})),n}return e}function y(e){!function(e){var n=e.travis,t=e.matrixAspects,s=e.steps;("python"===n.language||n.python)&&(t["python-version"]=v(n.python,["3.8"]),s.push({name:"Set up Python ${{ matrix.python-version }}",uses:"actions/setup-python@v2",with:{"python-version":"${{ matrix.python-version }}"}}),delete n.python,delete n.language)}(e),function(e){var n=e.travis,t=e.messages,s=e.steps,r=e.matrixAspects;("node_js"===n.language||n.node_js)&&(t.push({type:"info",text:"Node.js versions are not yet parsed from the Travis configuration."}),r["node-version"]=["14.x"],s.push({name:"Set up Node.js ${{ matrix.node-version }}",uses:"actions/setup-node@v1",with:{"node-version":"${{ matrix.node-version }}"}}),delete n.node_js,delete n.language)}(e)}var g=t(36);var x=["before_install","install","before_script","script","after_script","after_success"],O={after_success:"after_success actions were concatenated",before_install:"before_install actions were prepended"};function E(e,n,t){var s=0;if(v(e.travis[n]).forEach((function(r){"string"===typeof r?(e.steps.push(t({run:r})),s++):e.messages.push({type:"warning",text:"Entry not a string in ".concat(n,": ").concat(r)})})),s>0){delete e.travis[n];var r=O[n];r&&e.messages.push({type:"warning",text:r})}return s}function S(e){var n=function(e){if(Object.keys(e.environmentVariables).length)return Object.fromEntries(Object.keys(e.environmentVariables).map((function(e){return[e,"${{ matrix.".concat(e," }}")]})))}(e),t=function(e){return n&&e.run&&e.run.includes("$")&&(e.env=n),e};e.steps.push({uses:"actions/checkout@v2"});var s,r=Object(g.a)(x);try{for(r.s();!(s=r.n()).done;){E(e,s.value,t)}}catch(a){r.e(a)}finally{r.f()}}function T(e){var n=Object(d.a)(Object(d.a)({},e.matrixAspects),{},{$env$:e.environmentVariableCombinations}),t=Object.keys(n),s=Object.values(n),r=[];return f(s,(function(e){var n={};t.forEach((function(t,s){var r=e[s];"$env$"===t&&"object"===typeof r?Object.assign(n,r):n[t]=r})),r.push(n)})),r}function _(e){return e.environmentVariableCombinations.length?{matrix:{include:T(e)}}:{matrix:Object(d.a)({},e.matrixAspects)}}function A(e,n){if(e){var t,s=e[n];return s&&(!0===s||!1===s?delete e[n]:Array.isArray(s)?(t=new Set(v(s)),delete e[n]):"string"===typeof s?(t=new Set([s]),delete e[n]):(t=new Set(v(s.packages)),delete s.packages)),t}}function w(e){!function(e){var n=A(e.travis.addons,"apt");n&&n.size&&e.steps.push({name:"Install dependencies (Ubuntu)",if:"runner.os == 'Linux'",run:["sudo apt-get update","sudo apt-get install -y "+Array.from(n).sort().join(" ")].join("\n")})}(e),function(e){var n=A(e.travis.addons,"homebrew");n&&n.size&&e.steps.push({name:"Install dependencies (macOS)",if:"runner.os == 'macOS'",run:["brew update","brew install "+Array.from(n).sort().join(" ")].join("\n")})}(e)}function k(e){var n=Object(d.a)(Object(d.a)({},e),{},{steps:[],environmentVariableCombinations:[],environmentVariables:{},matrixAspects:{os:["ubuntu-18.04"]}});return function(e){Array.isArray(e.travis.env)&&e.travis.env.every((function(e){return"string"===typeof e}))&&(e.travis.env.forEach((function(n){if("string"===typeof n){var t=Object.fromEntries(n.split(/\s+/).map((function(e){var n=/^(.+?)=(.+)$/.exec(e);return n?[n[1],n[2]]:[e,"1"]})));e.environmentVariableCombinations.push(t),Object.keys(t).forEach((function(n){e.environmentVariables[n]=!0}))}})),delete e.travis.env)}(n),w(n),y(n),function(e){var n=e.travis,t=e.steps,s=e.messages;n.cache&&!0!==n.cache&&n.cache.directories&&(t.push({name:"Cache multiple paths",uses:"actions/cache@v2",with:{path:v(n.cache.directories).join("\n"),key:"${{ runner.os }}-${{ hashFiles('TODO') }}"}}),s.push({type:"info",text:"Please revise the cache key for `actions/cache`."}),delete n.cache)}(n),S(n),{"runs-on":"${{ matrix.os }}",strategy:_(n),steps:n.steps}}function I(e){if(!(e=e.trim()).length)return{yaml:"",messages:[]};var n=function(e){return{travis:Object(h.safeLoad)(e),messages:[],github:{name:"Converted Workflow",on:{push:{branches:["master"]},pull_request:{branches:["master"]}},jobs:{}}}}(e),t=n.travis,s=n.messages,r=n.github;!function(e){var n=e.travis,t=e.messages;n.sudo&&t.push({type:"info",text:"Ignoring `sudo`"}),delete n.sudo,n.dist&&t.push({type:"info",text:"Ignoring `dist`"}),delete n.dist}(n),r.jobs.build=k(n);var a=m(t);return{yaml:Object(h.safeDump)(r,{noCompatMode:!0}),messages:s,remainingTravis:j(a)?void 0:Object(h.safeDump)(a,{noCompatMode:!0})}}var $=t(119);function V(e){var n=e.messages;return n.length?Object(s.jsx)("div",{children:n.map((function(e,n){var t=e.type,r=e.text;return Object(s.jsxs)($.a,{status:t,children:[Object(s.jsx)($.c,{}),Object(s.jsx)($.b,{children:r})]},"".concat(r," ").concat(n))}))}):null}function C(e){var n=e.result;return n&&n.error?Object(s.jsx)("div",{children:Object(s.jsxs)($.a,{status:"error",children:[Object(s.jsx)($.c,{}),Object(s.jsxs)($.b,{children:["Conversion failed: $",n.error]})]})}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(u.a,{direction:"column",flex:1,margin:2,children:[Object(s.jsx)(l.a,{as:"h4",size:"md",children:"GitHub Actions YAML"}),Object(s.jsx)(p.a,{placeholder:"GitHub Actions YAML will appear here",readOnly:!0,value:n.yaml,style:{height:"auto"},flex:1}),Object(s.jsx)(V,{messages:n.messages})]}),n.remainingTravis?Object(s.jsxs)(u.a,{direction:"column",flex:1,margin:2,children:[Object(s.jsx)(l.a,{as:"h4",size:"md",children:"Unconverted Travis configuration"}),Object(s.jsxs)($.a,{status:"info",children:[Object(s.jsx)($.c,{}),Object(s.jsxs)($.b,{children:["The app doesn't yet know how to handle whatever remains in this box.",Object(s.jsx)("br",{}),"If you can help, please open a PR on GitHub \u261d\ufe0f"]})]}),Object(s.jsx)(p.a,{placeholder:"GitHub Actions YAML will appear here",readOnly:!0,value:n.remainingTravis,style:{height:"auto"},flex:1})]}):null]})}var N=t(115),P=t(118),Y=function(){return Object(s.jsxs)(u.a,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:"1.5rem",bg:"blue.500",color:"white",children:[" ",Object(s.jsx)(u.a,{align:"center",mr:5,children:Object(s.jsx)(l.a,{as:"h1",size:"lg",children:"Travis to GitHub Actions converter"})}),Object(s.jsx)(N.a,{mt:{base:4,md:0},children:Object(s.jsx)(P.a,{bg:"transparent",border:"1px",as:"a",target:"_blank",href:"https://github.com/akx/travis-to-github-actions",children:"Contribute on GitHub"})})]})};var M=function(){var e,n=a.a.useState(""),t=Object(c.a)(n,2),r=t[0],i=t[1],o=(e=r,a.a.useMemo((function(){try{return I(e)}catch(n){return{yaml:"",messages:[],error:n.toString(),errorDetail:n}}}),[e]));return Object(s.jsxs)(u.a,{direction:"column",flex:1,children:[Object(s.jsx)(Y,{}),Object(s.jsxs)(u.a,{padding:5,flex:1,children:[Object(s.jsxs)(u.a,{flex:2,direction:"column",margin:2,children:[Object(s.jsxs)(u.a,{justify:"space-between",children:[Object(s.jsx)(l.a,{as:"h4",size:"md",children:"Input Travis.yml"}),Object(s.jsx)("a",{href:"#",onClick:function(){return i('dist: xenial\nlanguage: python\n\n# Use travis docker infrastructure for greater speed\nsudo: false\n\ncache:\n  directories:\n  - cldr\n  - "$HOME/.cache/pip"\n  - "$HOME/.pyenv"\n\nmatrix:\n  include:\n    - os: linux\n      python: 2.7\n      env:\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      python: 2.7\n      env:\n      - CDECIMAL=m3-cdecimal\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      dist: trusty\n      python: pypy\n      env:\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      dist: trusty\n      python: pypy3\n      env:\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.4\n      env:\n      - PYTEST_VERSION=4.3.1\n    - os: linux\n      python: 3.5\n      env:\n      - PYTHON_TEST_FLAGS=-bb\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.6\n      env:\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.7\n      env:\n      - PYTEST_VERSION=6.1.2\n    - os: linux\n      python: 3.8\n      env:\n      - PYTEST_VERSION=6.1.2\n\ninstall:\n  - bash .ci/deps.${TRAVIS_OS_NAME}.sh\n  - pip install --upgrade pip\n  - pip install --upgrade $CDECIMAL pytest==$PYTEST_VERSION pytest-cov freezegun==0.3.12\n  - pip install --editable .\n\nscript:\n  - make test-cov\n  - bash .ci/deploy.${TRAVIS_OS_NAME}.sh\n\nnotifications:\n  email: false\n  irc:\n    channels:\n      - "chat.freenode.net#pocoo"\n    on_success: change\n    on_failure: always\n    use_notice: true\n    skip_join: true')},children:"Load example"})]}),Object(s.jsx)(p.a,{placeholder:"Paste a travis.yml here",value:r,onChange:function(e){return i(e.target.value)},style:{height:"auto"},flex:1})]}),Object(s.jsx)(u.a,{flex:3,direction:"row",children:Object(s.jsx)(C,{result:o})})]})]})},R=t(116);o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(R.a,{children:Object(s.jsx)(M,{})})}),document.getElementById("root"))},72:function(e,n,t){}},[[101,1,2]]]);
//# sourceMappingURL=main.b4f36e7b.chunk.js.map